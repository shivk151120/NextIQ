{% extends 'core/base.html' %}
{% block content %}
<div class="container mt-4">
  <h3>Lessons</h3>
  <a href="{% url 'add_lesson' %}" class="btn btn-success mb-3">Add New Lesson</a>
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr><th>Title</th><th>Description</th><th>Audio</th><th>Created By</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {% for lesson in lessons %}
        <tr>
          <td>{{ lesson.title }}</td>
          <td>{{ lesson.description }}</td>
          <td>
            {% if lesson.audio %}
            <audio controls>
              <source src="{{ lesson.audio.url }}" type="audio/mpeg">
            </audio>
            {% else %}â€”{% endif %}
          </td>
          <td>{{ lesson.created_by.username }}</td>
          <td>
            <a href="{% url 'edit_lesson' lesson.id %}" class="btn btn-primary btn-sm">Edit</a>
            <a href="{% url 'delete_lesson' lesson.id %}" class="btn btn-danger btn-sm"
               onclick="return confirm('Are you sure?');">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="5">No lessons found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
